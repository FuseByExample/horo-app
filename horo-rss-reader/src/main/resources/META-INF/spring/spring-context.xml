<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:osgi="http://www.springframework.org/schema/osgi"
      xsi:schemaLocation="
      http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
      http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">

    <bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="mapperLocations" value="classpath*:META-INF/mappers/**/*.xml" />
    </bean>
    
    <bean id="mybatis" class="org.apache.camel.component.mybatis.MyBatisComponent">
        <property name="sqlSessionFactory" ref="sqlSessionFactory" />
    </bean>

    <camelContext id="bookings" xmlns="http://camel.apache.org/schema/spring">
        <propertyPlaceholder id="properties" location="ref:osgi.properties"/>

        <routeBuilder ref="rssReaderComAstrology" />
        <routeBuilder ref="rssReaderComAstrologyExtended" />
    </camelContext>

    <bean id="rssReaderComAstrology" class="net.jakubkorab.horo.rssReader.RssConsumerRouteBuilder">
        <property name="sourceName" value="com.astronomy"/>
        <property name="sourceUri" value="rss://http://www.astrology.com/horoscopes/daily-horoscope.rss"/>
        <property name="targetUri" value="mybatis:foo"/>
    </bean>
</beans>
